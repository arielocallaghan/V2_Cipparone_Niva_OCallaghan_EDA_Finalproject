---
title: "heathdata"
author: "Ariel O'Callaghan"
date: "2022-12-04"
output: pdf_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

knitr::opts_chunk$set(tidy.opts=list(width.cutoff=50), tidy=TRUE)

getwd()

library(tidyverse)
library(vtable)
library(lubridate)
library(dplyr)
library(ggplot2)

#install.packages("vtable")

#raw data import individual csv files https://www.countyhealthrankings.org/
#

health2010<- read.csv("./RawData/2010health.csv",stringsAsFactors = TRUE)
health2011<- read.csv("./RawData/2011health.csv",stringsAsFactors = TRUE)
health2012<- read.csv("./RawData/2012health.csv",stringsAsFactors = TRUE)
health2013<- read.csv("./RawData/2013health.csv",stringsAsFactors = TRUE)
health2014<- read.csv("./RawData/2014health.csv",stringsAsFactors = TRUE)
health2015<- read.csv("./RawData/2015health.csv",stringsAsFactors = TRUE)
health2016<- read.csv("./RawData/2016health.csv",stringsAsFactors = TRUE)
health2017<- read.csv("./RawData/2017health.csv",stringsAsFactors = TRUE)
health2018<- read.csv("./RawData/2018health.csv",stringsAsFactors = TRUE)
health2019<- read.csv("./RawData/2019health.csv",stringsAsFactors = TRUE)
health2020<- read.csv("./RawData/2020health.csv",stringsAsFactors = TRUE)



#combine individual csv 2010-2020 into one file
health.all<- rbind(health2010,health2011,health2012, health2013, health2014, health2015, health2016, health2017, health2018, health2019, health2020)

# create new csv file with all years 2010-2020 combined
write.csv(health.all, row.names = FALSE, file = "./RawData/healthdata.combine.csv") 


#set theme for plots
mytheme <- theme_classic(base_size = 14) + theme(axis.text = element_text(color = "black"), legend.position = "top")
theme_set(mytheme)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cleaning the dataset}

#cleaning data and reading year as a date
str(health.all)

# Change year column from integer to character 
class(health.all$year)
health.all$year <- as.character(as.numeric(health.all$year)) 
class(health.all$year)
view(health.all$year)

#chage from character to date
health.all$year <- as.Date(health.all$year , format = "%Y")
class(health.all$year)

print(sapply(health.all, class))

#health.all.clean<-
  health.all %>%
  mutate(health.all, year = year(Date))%>%
  filter(Date= c(2010-2020))

#health.all.2 <- mutate(health.all, y = year(Date)) 

#Format date for only 2019 dataset 

class(health2019$year)
health2019$year <- as.character(as.numeric(health2019$year)) 
class(health2019$year)
view(health2019$year)

health2019$year <- as.Date(health2019$year , format = "%Y")
class(health2019$year)

class(health2019$Health.Outcomes.Z.Score)
class(health2019$County)
```

## Including Plots

You can also embed plots, for example:

```{r plot health rankings and county, echo=FALSE}

health.outcomes.plot<-
  ggplot(health.all, aes(x = year, y= Health.Outcomes.Z.Score ))+
  geom_boxplot(aes(color = County))
print(health.outcomes.plot)
      


#+ 
  xlab(expression(""))


+
  xlab(expression("Dry Mass")) + ylab(expression("Collection Date")) + labs(color = "Needles Function Group")
print(Neon.litter.needles)

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
